<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Desplazamiento Aleatorio de Estudiantes</title>
    <style>
        .grado {
            margin-bottom: 20px;
        }
        .seccion {
            margin-left: 20px;
        }
        .estudiante {
            margin-left: 40px;
        }
    </style>
</head>
<body>
    <h1>Desplazamiento Aleatorio de Estudiantes entre Cursos</h1>
    <button onclick="desplazarEstudiantes()">Desplazar Estudiantes</button>
    <div id="listaEstudiantes"></div>

    <script>
        let estudiantesPorGrado = {
            quinto: {
                "5c": Array.from({ length: 31 }, (_, i) => ({ id: i + 1, nombre: `5c Estudiante ${i + 1}`, grado: "quinto" }))
            },
            sexto: {
                "6a": Array.from({ length: 31 }, (_, i) => ({ id: i + 1, nombre: `6a Estudiante ${i + 1}`, grado: "sexto" })),
                "6b": Array.from({ length: 31 }, (_, i) => ({ id: i + 1, nombre: `6b Estudiante ${i + 1}`, grado: "sexto" })),
                "6c": Array.from({ length: 30 }, (_, i) => ({ id: i + 1, nombre: `6c Estudiante ${i + 1}`, grado: "sexto" }))
            },
            septimo: {
                "7a": Array.from({ length: 28 }, (_, i) => ({ id: i + 1, nombre: `7a Estudiante ${i + 1}`, grado: "septimo" })),
                "7b": Array.from({ length: 27 }, (_, i) => ({ id: i + 1, nombre: `7b Estudiante ${i + 1}`, grado: "septimo" }))
            },
            octavo: {
                "8a": Array.from({ length: 33 }, (_, i) => ({ id: i + 1, nombre: `8a Estudiante ${i + 1}`, grado: "octavo" })),
                "8b": Array.from({ length: 32 }, (_, i) => ({ id: i + 1, nombre: `8b Estudiante ${i + 1}`, grado: "octavo" }))
            },
            noveno: {
                "9a": Array.from({ length: 20 }, (_, i) => ({ id: i + 1, nombre: `9a Estudiante ${i + 1}`, grado: "noveno" })),
                "9b": Array.from({ length: 20 }, (_, i) => ({ id: i + 1, nombre: `9b Estudiante ${i + 1}`, grado: "noveno" }))
            },
            decimo: {
                "10a": Array.from({ length: 26 }, (_, i) => ({ id: i + 1, nombre: `10a Estudiante ${i + 1}`, grado: "decimo" })),
                "10b": Array.from({ length: 26 }, (_, i) => ({ id: i + 1, nombre: `10b Estudiante ${i + 1}`, grado: "decimo" }))
            },
            once: {
                "11a": Array.from({ length: 28 }, (_, i) => ({ id: i + 1, nombre: `11a Estudiante ${i + 1}`, grado: "once" }))
            }
        };

        function desplazarEstudiantes() {
            const secciones = Object.keys(estudiantesPorGrado.quinto);
            let listaEstudiantes = [];

            // Obtener la lista de estudiantes
            Object.values(estudiantesPorGrado).forEach(grado => {
                Object.values(grado).forEach(seccion => {
                    listaEstudiantes = listaEstudiantes.concat(seccion);
                });
            });

            // Barajar la lista de estudiantes
            for (let i = listaEstudiantes.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [listaEstudiantes[i], listaEstudiantes[j]] = [listaEstudiantes[j], listaEstudiantes[i]];
            }

            // Desplazar estudiantes a secciones de manera alterna hasta que se agoten
            let indiceEstudiante = 0;

            for (let i = 0; i < secciones.length; i++) {
                const seccion = secciones[i];
                let indiceGrado = 0;

                while (indiceEstudiante < listaEstudiantes.length && indiceGrado < Object.keys(estudiantesPorGrado).length) {
                    const estudiante = listaEstudiantes[indiceEstudiante];
                    const grado = Object.keys(estudiantesPorGrado)[indiceGrado];

                    if (estudiante.grado !== grado) {
                        // Verificar que la sección tenga espacio
                        if (estudiantesPorGrado[grado][seccion].length < estudiantesPorGrado[grado][seccion].length) {
                            estudiantesPorGrado[grado][seccion].push(estudiante);
                            indiceEstudiante++;
                        }
                    }

                    indiceGrado = (indiceGrado + 1) % Object.keys(estudiantesPorGrado).length;
                }
            }

            mostrarEstudiantes();
        }

        function mostrarEstudiantes() {
            const contenedor = document.getElementById('listaEstudiantes');
            contenedor.innerHTML = '';

            Object.keys(estudiantesPorGrado).forEach(grado => {
                const divGrado = document.createElement('div');
                divGrado.classList.add('grado');
                divGrado.innerHTML = `<strong>Grado: ${grado.toUpperCase()}</strong>`;
                contenedor.appendChild(divGrado);

                Object.keys(estudiantesPorGrado[grado]).forEach(seccion => {
                    const divSeccion = document.createElement('div');
                    divSeccion.classList.add('seccion');
                    divSeccion.innerHTML = `Sección: ${seccion}`;
                    divGrado.appendChild(divSeccion);

                    estudiantesPorGrado[grado][seccion].forEach(estudiante => {
                        const divEstudiante = document.createElement('div');
                        divEstudiante.classList.add('estudiante');
                        divEstudiante.textContent = `${estudiante.id} - ${estudiante.nombre}`;
                        divSeccion.appendChild(divEstudiante);
                    });
                });
            });
        }

        mostrarEstudiantes();
    </script>
</body>
</html>
